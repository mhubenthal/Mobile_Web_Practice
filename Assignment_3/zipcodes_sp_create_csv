-- Setup "zipcodes" table in Postgres from "places" table.

SELECT zipcode, lat, long, city, state, population, housingunits, income, landarea, waterarea, militaryrestrictioncodes INTO TABLE zipcodes FROM places;

-- Add 'id' key as index
CREATE SEQUENCE zipcodes_id_seq;
ALTER TABLE zipcodes ADD id INT UNIQUE;
ALTER TABLE zipcodes ALTER COLUMN id SET DEFAULT NEXTVAL('zipcodes_id_seq');
UPDATE zipcodes SET id = NEXTVAL('zipcodes_id_seq');
ALTER TABLE zipcodes ADD PRIMARY KEY (id);

COPY (SELECT * FROM zipcodes) TO '/Users/maxhubenthal/Desktop/zipcodes.csv' WITH CSV HEADER;
